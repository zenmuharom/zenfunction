package function

import (
	"encoding/json"
	"errors"
	"fmt"
	"testing"

	"github.com/stretchr/testify/require"
	"github.com/zenmuharom/zenlogger"
)

func TestAddProperty(t *testing.T) {
	logger := zenlogger.NewZenlogger()
	assigner := NewAssigner(logger)

	testCases := []TestCase{
		{
			Input:    "addPropertyToArray([{\"alamat\": \"JL.TEBET TIMUR DALAM III NO.15\", \"amount\": \"329400\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"329400\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311508030804300010\", \"nama\": \"PT. JCO DONUTS   COFFE\", \"no_skpd\": \"\", \"nop\": \"311508030804300010\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JL. TEBET TIMUR DALAM III/15\", \"amount\": \"292800\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"292800\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311508030805260090\", \"nama\": \"JCO DONUTS   COFFEE\", \"no_skpd\": \"\", \"nop\": \"311508030805260090\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JL.TEBET TIMUR DALAM III NO.15\", \"amount\": \"512400\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"512400\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311508030804330016\", \"nama\": \"PT. JCO DONUTS   COFFEE\", \"no_skpd\": \"\", \"nop\": \"311508030804330016\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JL. TAMAN RATU INDAH BLOK A-1/15 JAKARTA 1151\", \"amount\": \"118950\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"118950\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311507310804270022\", \"nama\": \"TALKINDO SELAKSA ANUGRAH, PT\", \"no_skpd\": \"\", \"nop\": \"311507310804270022\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JL. TEBET TIMUR DALAM III NO. 15\", \"amount\": \"291657\", \"amount_bunga\": \"0\", \"amount_denda\": \"5719\", \"amount_pokok\": \"285938\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311508030805170070\", \"nama\": \"PT. J.CO DONUTS COFFEE\", \"no_skpd\": \"\", \"nop\": \"311508030805170070\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JLN. CASABLANCA KAV. 88 MALL KOTA KASABLANKA\", \"amount\": \"714488\", \"amount_bunga\": \"0\", \"amount_denda\": \"98550\", \"amount_pokok\": \"615938\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311509020810490002\", \"nama\": \"ROYAL PANCA PERSADA ANUGERAH,\", \"no_skpd\": \"\", \"nop\": \"311509020810490002\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JL. TAMAN RATU INDAH BLOK A-1/15 JAKARTA 1151\", \"amount\": \"1363350\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"1363350\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311507310804250018\", \"nama\": \"TALKINDO SELAKSA ANUGRAH, PT\", \"no_skpd\": \"\", \"nop\": \"311507310804250018\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JLN. SULTAN ISKANDAR MUDA /\", \"amount\": \"446063\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"446063\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311508310811230002\", \"nama\": \"JOHNNY ANDREAN\", \"no_skpd\": \"\", \"nop\": \"311508310811230002\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JL.TEBET TIMUR DALAM III NO.15\", \"amount\": \"146400\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"146400\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311508030804320014\", \"nama\": \"PT. JCO DONUTS   COFFE\", \"no_skpd\": \"\", \"nop\": \"311508030804320014\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JL. TEBET TIMUR DALAM III/15\", \"amount\": \"576450\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"576450\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311508030805220082\", \"nama\": \"JCO DONUTS   COFFEE\", \"no_skpd\": \"\", \"nop\": \"311508030805220082\", \"tahun_pajak\": \"\"}], ntb, item.randomInt(12))",
			Expected: "[{\"alamat\": \"JL.TEBET TIMUR DALAM III NO.15\", \"amount\": \"329400\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"329400\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311508030804300010\", \"nama\": \"PT. JCO DONUTS   COFFE\", \"no_skpd\": \"\", \"nop\": \"311508030804300010\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JL. TEBET TIMUR DALAM III/15\", \"amount\": \"292800\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"292800\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311508030805260090\", \"nama\": \"JCO DONUTS   COFFEE\", \"no_skpd\": \"\", \"nop\": \"311508030805260090\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JL.TEBET TIMUR DALAM III NO.15\", \"amount\": \"512400\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"512400\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311508030804330016\", \"nama\": \"PT. JCO DONUTS   COFFEE\", \"no_skpd\": \"\", \"nop\": \"311508030804330016\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JL. TAMAN RATU INDAH BLOK A-1/15 JAKARTA 1151\", \"amount\": \"118950\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"118950\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311507310804270022\", \"nama\": \"TALKINDO SELAKSA ANUGRAH, PT\", \"no_skpd\": \"\", \"nop\": \"311507310804270022\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JL. TEBET TIMUR DALAM III NO. 15\", \"amount\": \"291657\", \"amount_bunga\": \"0\", \"amount_denda\": \"5719\", \"amount_pokok\": \"285938\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311508030805170070\", \"nama\": \"PT. J.CO DONUTS COFFEE\", \"no_skpd\": \"\", \"nop\": \"311508030805170070\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JLN. CASABLANCA KAV. 88 MALL KOTA KASABLANKA\", \"amount\": \"714488\", \"amount_bunga\": \"0\", \"amount_denda\": \"98550\", \"amount_pokok\": \"615938\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311509020810490002\", \"nama\": \"ROYAL PANCA PERSADA ANUGERAH,\", \"no_skpd\": \"\", \"nop\": \"311509020810490002\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JL. TAMAN RATU INDAH BLOK A-1/15 JAKARTA 1151\", \"amount\": \"1363350\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"1363350\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311507310804250018\", \"nama\": \"TALKINDO SELAKSA ANUGRAH, PT\", \"no_skpd\": \"\", \"nop\": \"311507310804250018\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JLN. SULTAN ISKANDAR MUDA /\", \"amount\": \"446063\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"446063\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311508310811230002\", \"nama\": \"JOHNNY ANDREAN\", \"no_skpd\": \"\", \"nop\": \"311508310811230002\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JL.TEBET TIMUR DALAM III NO.15\", \"amount\": \"146400\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"146400\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311508030804320014\", \"nama\": \"PT. JCO DONUTS   COFFE\", \"no_skpd\": \"\", \"nop\": \"311508030804320014\", \"tahun_pajak\": \"\" }, { \"alamat\": \"JL. TEBET TIMUR DALAM III/15\", \"amount\": \"576450\", \"amount_bunga\": \"0\", \"amount_denda\": \"0\", \"amount_pokok\": \"576450\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"REKLAME\", \"kd_rek_bunga\": \"4149707001\", \"kd_rek_denda\": \"4149707002\", \"kd_rek_pokok\": \"4110801\", \"kd_rek_sanksi\": \"0\", \"kode_billing\": \"311508030805220082\", \"nama\": \"JCO DONUTS   COFFEE\", \"no_skpd\": \"\", \"nop\": \"311508030805220082\", \"tahun_pajak\": \"\" }]",
		},
		{
			Input:    "addPropertyToArray([{\"alamat\":\"JLN. MH. THAMRIN NO. 09 CIKOKOL TANGERANG\",\"amount\":\"5256000\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"5256000\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149707001\",\"kd_rek_denda\":\"4149707002\",\"kd_rek_pokok\":\"4110801\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312101250809030007\",\"nama\":\"SUMBER ALFARIA TRIJAYA, PT.\",\"no_skpd\":\"\",\"nop\":\"312101250809030007\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL PECENONGAN NO. 67 ABC\",\"amount\":\"64209746\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"64209746\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149705001\",\"kd_rek_denda\":\"4149705002\",\"kd_rek_pokok\":\"4110601\",\"kd_rek_sanksi\":\"4149705003\",\"kode_billing\":\"312012040720470004\",\"nama\":\"MAGAL PECENONGAN\",\"no_skpd\":\"\",\"nop\":\"312012040720470004\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL H KAMAD NO17 PAH REVOLUSI\",\"amount\":\"934597\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"934597\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149703001\",\"kd_rek_denda\":\"4149703002\",\"kd_rek_pokok\":\"4110401\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312106040418190034\",\"nama\":\"PT.BUNGKA PANCA JAYA\",\"no_skpd\":\"\",\"nop\":\"312106040418190034\",\"tahun_pajak\":\"\"},{\"alamat\":\"JATIKRAMAT RT.002/01\",\"amount\":\"4380000\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"4380000\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149707001\",\"kd_rek_denda\":\"4149707002\",\"kd_rek_pokok\":\"4110801\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312101250808420003\",\"nama\":\"ADE SARIP HIDAYAT\",\"no_skpd\":\"\",\"nop\":\"312101250808420003\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL. RAYA CONDET GG ANGGREK NO. 41A\",\"amount\":\"1622500\",\"amount_bunga\":\"325000\",\"amount_denda\":\"12500\",\"amount_pokok\":\"1250000\",\"amount_sanksi\":\"35000\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149704001\",\"kd_rek_denda\":\"4149704002\",\"kd_rek_pokok\":\"4110514\",\"kd_rek_sanksi\":\"4149704003\",\"kode_billing\":\"312106040518120030\",\"nama\":\"RUMAH KOS H. SOETJIPTO SOEGIHA\",\"no_skpd\":\"\",\"nop\":\"312106040518120030\",\"tahun_pajak\":\"\"},{\"alamat\":\"MALL PURI INDAH\",\"amount\":\"2996448\",\"amount_bunga\":\"115248\",\"amount_denda\":\"0\",\"amount_pokok\":\"2881200\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149705001\",\"kd_rek_denda\":\"4149705002\",\"kd_rek_pokok\":\"4110602\",\"kd_rek_sanksi\":\"4149705003\",\"kode_billing\":\"312103250623380006\",\"nama\":\"BAKMI GM\",\"no_skpd\":\"\",\"nop\":\"312103250623380006\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL ALTERNATIF BUPERTA CIBUBUR RT.005/09 CIMAN\",\"amount\":\"9102188\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"9102188\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149707001\",\"kd_rek_denda\":\"4149707002\",\"kd_rek_pokok\":\"4110801\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312101250814100019\",\"nama\":\"PT GUBUG UDANG SENTOSA\",\"no_skpd\":\"\",\"nop\":\"312101250814100019\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL PECENONGAN NO. 67 ABC\",\"amount\":\"64209746\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"64209746\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149705001\",\"kd_rek_denda\":\"4149705002\",\"kd_rek_pokok\":\"4110601\",\"kd_rek_sanksi\":\"4149705003\",\"kode_billing\":\"312012040719220001\",\"nama\":\"MAGAL PECENONGAN\",\"no_skpd\":\"\",\"nop\":\"312012040719220001\",\"tahun_pajak\":\"\"},{\"alamat\":\"GEDUNG TITAN CENTER BLK B7/B1 JL.BOULEVARD BI\",\"amount\":\"18615000\",\"amount_bunga\":\"0\",\"amount_denda\":\"365000\",\"amount_pokok\":\"18250000\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149707001\",\"kd_rek_denda\":\"4149707002\",\"kd_rek_pokok\":\"4110801\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312101250809050008\",\"nama\":\"PT. ICI PAINT INDONESIA\",\"no_skpd\":\"\",\"nop\":\"312101250809050008\",\"tahun_pajak\":\"\"},{\"alamat\":\"SIDAMUKTI SUKAMAJU CILODONG DEPOK\",\"amount\":\"912500\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"912500\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149707001\",\"kd_rek_denda\":\"4149707002\",\"kd_rek_pokok\":\"4110801\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312101250808430005\",\"nama\":\"WANDA OLIVIA WEWENGKANG\",\"no_skpd\":\"\",\"nop\":\"312101250808430005\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL. RAYA CONDET GG ANGGREK NO. 41A\",\"amount\":\"1622500\",\"amount_bunga\":\"325000\",\"amount_denda\":\"12500\",\"amount_pokok\":\"1250000\",\"amount_sanksi\":\"35000\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149704001\",\"kd_rek_denda\":\"4149704002\",\"kd_rek_pokok\":\"4110514\",\"kd_rek_sanksi\":\"4149704003\",\"kode_billing\":\"312106040518130031\",\"nama\":\"RUMAH KOS H. SOETJIPTO SOEGIHA\",\"no_skpd\":\"\",\"nop\":\"312106040518130031\",\"tahun_pajak\":\"\"},{\"alamat\":\"PEMUDA NO. 77\",\"amount\":\"474970\",\"amount_bunga\":\"9313\",\"amount_denda\":\"0\",\"amount_pokok\":\"465657\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149705001\",\"kd_rek_denda\":\"4149705002\",\"kd_rek_pokok\":\"4110602\",\"kd_rek_sanksi\":\"4149705003\",\"kode_billing\":\"312103270601210001\",\"nama\":\"LESEHAN GURAME\",\"no_skpd\":\"\",\"nop\":\"312103270601210001\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL. RAYA CONDET GG ANGGREK NO. 41A\",\"amount\":\"1622500\",\"amount_bunga\":\"325000\",\"amount_denda\":\"12500\",\"amount_pokok\":\"1250000\",\"amount_sanksi\":\"35000\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149704001\",\"kd_rek_denda\":\"4149704002\",\"kd_rek_pokok\":\"4110514\",\"kd_rek_sanksi\":\"4149704003\",\"kode_billing\":\"312106040518140032\",\"nama\":\"RUMAH KOS H. SOETJIPTO SOEGIHA\",\"no_skpd\":\"\",\"nop\":\"312106040518140032\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL PECENONGAN NO. 67 ABC\",\"amount\":\"64209746\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"64209746\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149705001\",\"kd_rek_denda\":\"4149705002\",\"kd_rek_pokok\":\"4110601\",\"kd_rek_sanksi\":\"4149705003\",\"kode_billing\":\"312012040719480002\",\"nama\":\"MAGAL PECENONGAN\",\"no_skpd\":\"\",\"nop\":\"312012040719480002\",\"tahun_pajak\":\"\"},{\"alamat\":\"JATIKRAMAT RT.002/01\",\"amount\":\"4380000\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"4380000\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149707001\",\"kd_rek_denda\":\"4149707002\",\"kd_rek_pokok\":\"4110801\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312101250808430004\",\"nama\":\"ADE SARIP HIDAYAT\",\"no_skpd\":\"\",\"nop\":\"312101250808430004\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL PECENONGAN NO. 67 ABC\",\"amount\":\"51146664\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"51146664\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149705001\",\"kd_rek_denda\":\"4149705002\",\"kd_rek_pokok\":\"4110601\",\"kd_rek_sanksi\":\"4149705003\",\"kode_billing\":\"312012040720450003\",\"nama\":\"MAGAL PECENONGAN\",\"no_skpd\":\"\",\"nop\":\"312012040720450003\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL. HR. RASUNA SAID KAV 1 GD MENARA IMPERIUM\",\"amount\":\"4022200\",\"amount_bunga\":\"0\",\"amount_denda\":\"154700\",\"amount_pokok\":\"3867500\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149707001\",\"kd_rek_denda\":\"4149707002\",\"kd_rek_pokok\":\"4110805\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312101250808290002\",\"nama\":\"PT AVABANINDO PERKASA (OTEGO M\",\"no_skpd\":\"\",\"nop\":\"312101250808290002\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL. KEMANGGISAN NO. 9 RT.01/ 05 KEBON JERUK\",\"amount\":\"350325\",\"amount_bunga\":\"6869\",\"amount_denda\":\"0\",\"amount_pokok\":\"343456\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149704001\",\"kd_rek_denda\":\"4149704002\",\"kd_rek_pokok\":\"4110514\",\"kd_rek_sanksi\":\"4149704003\",\"kode_billing\":\"312103250523300004\",\"nama\":\"ROSELY SITI RUMAH KOST\",\"no_skpd\":\"\",\"nop\":\"312103250523300004\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL TANAH ABANG TIMUR 16A\",\"amount\":\"37833850\",\"amount_bunga\":\"3661340\",\"amount_denda\":\"0\",\"amount_pokok\":\"34172510\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149713001\",\"kd_rek_denda\":\"4149713002\",\"kd_rek_pokok\":\"4111401\",\"kd_rek_sanksi\":\"4149713003\",\"kode_billing\":\"312103301308430001\",\"nama\":\"PT ELTEHA INTERNASIONAL LTD\",\"no_skpd\":\"\",\"nop\":\"312103301308430001\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL. KEMANGGISAN NO. 9 RT.01/ 05 KEBON JERUK\",\"amount\":\"350325\",\"amount_bunga\":\"6869\",\"amount_denda\":\"0\",\"amount_pokok\":\"343456\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149704001\",\"kd_rek_denda\":\"4149704002\",\"kd_rek_pokok\":\"4110514\",\"kd_rek_sanksi\":\"4149704003\",\"kode_billing\":\"312103250523310005\",\"nama\":\"ROSELY SITI RUMAH KOST\",\"no_skpd\":\"\",\"nop\":\"312103250523310005\",\"tahun_pajak\":\"\"}], ntb, item.randomInt(12))",
			Expected: "[{\"alamat\":\"JLN. MH. THAMRIN NO. 09 CIKOKOL TANGERANG\",\"amount\":\"5256000\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"5256000\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149707001\",\"kd_rek_denda\":\"4149707002\",\"kd_rek_pokok\":\"4110801\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312101250809030007\",\"nama\":\"SUMBER ALFARIA TRIJAYA, PT.\",\"no_skpd\":\"\",\"nop\":\"312101250809030007\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL PECENONGAN NO. 67 ABC\",\"amount\":\"64209746\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"64209746\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149705001\",\"kd_rek_denda\":\"4149705002\",\"kd_rek_pokok\":\"4110601\",\"kd_rek_sanksi\":\"4149705003\",\"kode_billing\":\"312012040720470004\",\"nama\":\"MAGAL PECENONGAN\",\"no_skpd\":\"\",\"nop\":\"312012040720470004\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL H KAMAD NO17 PAH REVOLUSI\",\"amount\":\"934597\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"934597\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149703001\",\"kd_rek_denda\":\"4149703002\",\"kd_rek_pokok\":\"4110401\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312106040418190034\",\"nama\":\"PT.BUNGKA PANCA JAYA\",\"no_skpd\":\"\",\"nop\":\"312106040418190034\",\"tahun_pajak\":\"\"},{\"alamat\":\"JATIKRAMAT RT.002/01\",\"amount\":\"4380000\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"4380000\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149707001\",\"kd_rek_denda\":\"4149707002\",\"kd_rek_pokok\":\"4110801\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312101250808420003\",\"nama\":\"ADE SARIP HIDAYAT\",\"no_skpd\":\"\",\"nop\":\"312101250808420003\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL. RAYA CONDET GG ANGGREK NO. 41A\",\"amount\":\"1622500\",\"amount_bunga\":\"325000\",\"amount_denda\":\"12500\",\"amount_pokok\":\"1250000\",\"amount_sanksi\":\"35000\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149704001\",\"kd_rek_denda\":\"4149704002\",\"kd_rek_pokok\":\"4110514\",\"kd_rek_sanksi\":\"4149704003\",\"kode_billing\":\"312106040518120030\",\"nama\":\"RUMAH KOS H. SOETJIPTO SOEGIHA\",\"no_skpd\":\"\",\"nop\":\"312106040518120030\",\"tahun_pajak\":\"\"},{\"alamat\":\"MALL PURI INDAH\",\"amount\":\"2996448\",\"amount_bunga\":\"115248\",\"amount_denda\":\"0\",\"amount_pokok\":\"2881200\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149705001\",\"kd_rek_denda\":\"4149705002\",\"kd_rek_pokok\":\"4110602\",\"kd_rek_sanksi\":\"4149705003\",\"kode_billing\":\"312103250623380006\",\"nama\":\"BAKMI GM\",\"no_skpd\":\"\",\"nop\":\"312103250623380006\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL ALTERNATIF BUPERTA CIBUBUR RT.005/09 CIMAN\",\"amount\":\"9102188\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"9102188\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149707001\",\"kd_rek_denda\":\"4149707002\",\"kd_rek_pokok\":\"4110801\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312101250814100019\",\"nama\":\"PT GUBUG UDANG SENTOSA\",\"no_skpd\":\"\",\"nop\":\"312101250814100019\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL PECENONGAN NO. 67 ABC\",\"amount\":\"64209746\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"64209746\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149705001\",\"kd_rek_denda\":\"4149705002\",\"kd_rek_pokok\":\"4110601\",\"kd_rek_sanksi\":\"4149705003\",\"kode_billing\":\"312012040719220001\",\"nama\":\"MAGAL PECENONGAN\",\"no_skpd\":\"\",\"nop\":\"312012040719220001\",\"tahun_pajak\":\"\"},{\"alamat\":\"GEDUNG TITAN CENTER BLK B7/B1 JL.BOULEVARD BI\",\"amount\":\"18615000\",\"amount_bunga\":\"0\",\"amount_denda\":\"365000\",\"amount_pokok\":\"18250000\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149707001\",\"kd_rek_denda\":\"4149707002\",\"kd_rek_pokok\":\"4110801\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312101250809050008\",\"nama\":\"PT. ICI PAINT INDONESIA\",\"no_skpd\":\"\",\"nop\":\"312101250809050008\",\"tahun_pajak\":\"\"},{\"alamat\":\"SIDAMUKTI SUKAMAJU CILODONG DEPOK\",\"amount\":\"912500\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"912500\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149707001\",\"kd_rek_denda\":\"4149707002\",\"kd_rek_pokok\":\"4110801\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312101250808430005\",\"nama\":\"WANDA OLIVIA WEWENGKANG\",\"no_skpd\":\"\",\"nop\":\"312101250808430005\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL. RAYA CONDET GG ANGGREK NO. 41A\",\"amount\":\"1622500\",\"amount_bunga\":\"325000\",\"amount_denda\":\"12500\",\"amount_pokok\":\"1250000\",\"amount_sanksi\":\"35000\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149704001\",\"kd_rek_denda\":\"4149704002\",\"kd_rek_pokok\":\"4110514\",\"kd_rek_sanksi\":\"4149704003\",\"kode_billing\":\"312106040518130031\",\"nama\":\"RUMAH KOS H. SOETJIPTO SOEGIHA\",\"no_skpd\":\"\",\"nop\":\"312106040518130031\",\"tahun_pajak\":\"\"},{\"alamat\":\"PEMUDA NO. 77\",\"amount\":\"474970\",\"amount_bunga\":\"9313\",\"amount_denda\":\"0\",\"amount_pokok\":\"465657\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149705001\",\"kd_rek_denda\":\"4149705002\",\"kd_rek_pokok\":\"4110602\",\"kd_rek_sanksi\":\"4149705003\",\"kode_billing\":\"312103270601210001\",\"nama\":\"LESEHAN GURAME\",\"no_skpd\":\"\",\"nop\":\"312103270601210001\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL. RAYA CONDET GG ANGGREK NO. 41A\",\"amount\":\"1622500\",\"amount_bunga\":\"325000\",\"amount_denda\":\"12500\",\"amount_pokok\":\"1250000\",\"amount_sanksi\":\"35000\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149704001\",\"kd_rek_denda\":\"4149704002\",\"kd_rek_pokok\":\"4110514\",\"kd_rek_sanksi\":\"4149704003\",\"kode_billing\":\"312106040518140032\",\"nama\":\"RUMAH KOS H. SOETJIPTO SOEGIHA\",\"no_skpd\":\"\",\"nop\":\"312106040518140032\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL PECENONGAN NO. 67 ABC\",\"amount\":\"64209746\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"64209746\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149705001\",\"kd_rek_denda\":\"4149705002\",\"kd_rek_pokok\":\"4110601\",\"kd_rek_sanksi\":\"4149705003\",\"kode_billing\":\"312012040719480002\",\"nama\":\"MAGAL PECENONGAN\",\"no_skpd\":\"\",\"nop\":\"312012040719480002\",\"tahun_pajak\":\"\"},{\"alamat\":\"JATIKRAMAT RT.002/01\",\"amount\":\"4380000\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"4380000\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149707001\",\"kd_rek_denda\":\"4149707002\",\"kd_rek_pokok\":\"4110801\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312101250808430004\",\"nama\":\"ADE SARIP HIDAYAT\",\"no_skpd\":\"\",\"nop\":\"312101250808430004\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL PECENONGAN NO. 67 ABC\",\"amount\":\"51146664\",\"amount_bunga\":\"0\",\"amount_denda\":\"0\",\"amount_pokok\":\"51146664\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149705001\",\"kd_rek_denda\":\"4149705002\",\"kd_rek_pokok\":\"4110601\",\"kd_rek_sanksi\":\"4149705003\",\"kode_billing\":\"312012040720450003\",\"nama\":\"MAGAL PECENONGAN\",\"no_skpd\":\"\",\"nop\":\"312012040720450003\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL. HR. RASUNA SAID KAV 1 GD MENARA IMPERIUM\",\"amount\":\"4022200\",\"amount_bunga\":\"0\",\"amount_denda\":\"154700\",\"amount_pokok\":\"3867500\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149707001\",\"kd_rek_denda\":\"4149707002\",\"kd_rek_pokok\":\"4110805\",\"kd_rek_sanksi\":\"0\",\"kode_billing\":\"312101250808290002\",\"nama\":\"PT AVABANINDO PERKASA (OTEGO M\",\"no_skpd\":\"\",\"nop\":\"312101250808290002\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL. KEMANGGISAN NO. 9 RT.01/ 05 KEBON JERUK\",\"amount\":\"350325\",\"amount_bunga\":\"6869\",\"amount_denda\":\"0\",\"amount_pokok\":\"343456\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149704001\",\"kd_rek_denda\":\"4149704002\",\"kd_rek_pokok\":\"4110514\",\"kd_rek_sanksi\":\"4149704003\",\"kode_billing\":\"312103250523300004\",\"nama\":\"ROSELY SITI RUMAH KOST\",\"no_skpd\":\"\",\"nop\":\"312103250523300004\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL TANAH ABANG TIMUR 16A\",\"amount\":\"37833850\",\"amount_bunga\":\"3661340\",\"amount_denda\":\"0\",\"amount_pokok\":\"34172510\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149713001\",\"kd_rek_denda\":\"4149713002\",\"kd_rek_pokok\":\"4111401\",\"kd_rek_sanksi\":\"4149713003\",\"kode_billing\":\"312103301308430001\",\"nama\":\"PT ELTEHA INTERNASIONAL LTD\",\"no_skpd\":\"\",\"nop\":\"312103301308430001\",\"tahun_pajak\":\"\"},{\"alamat\":\"JL. KEMANGGISAN NO. 9 RT.01/ 05 KEBON JERUK\",\"amount\":\"350325\",\"amount_bunga\":\"6869\",\"amount_denda\":\"0\",\"amount_pokok\":\"343456\",\"amount_sanksi\":\"0\",\"bulan_pajak\":\"\",\"jns_pajak\":\"REKLAME\",\"kd_rek_bunga\":\"4149704001\",\"kd_rek_denda\":\"4149704002\",\"kd_rek_pokok\":\"4110514\",\"kd_rek_sanksi\":\"4149704003\",\"kode_billing\":\"312103250523310005\",\"nama\":\"ROSELY SITI RUMAH KOST\",\"no_skpd\":\"\",\"nop\":\"312103250523310005\",\"tahun_pajak\":\"\"}]",
		},
		{
			Input:    "addPropertyToArray([{\"alamat\": \"MH. THAMRIN KAV. 1, GRAND INDONESIA\", \"amount\": 226728, \"amount_bunga\": 2689, \"amount_denda\": 0, \"amount_pokok\": 224039, \"amount_sanksi\": 0, \"bulan_pajak\": \"\", \"jns_pajak\": \"Pajak Restoran\", \"kd_rek_bunga\": 4149705001, \"kd_rek_denda\": 4149705002, \"kd_rek_pokok\": 4110603, \"kd_rek_sanksi\": 4149705003, \"kode_billing\": 312402050610360000, \"nama\": \"THE COFFEE BEAN   TEA LEAF\", \"no_skpd\": \"01.00.05.753.1.12.2009\", \"nop\": 312402050610360000, \"tahun_pajak\": 2009 }], ntb, item.randomInt(12))",
			Expected: "[{\"alamat\": \"MH. THAMRIN KAV. 1, GRAND INDONESIA\", \"amount\": \"226728\", \"amount_bunga\": \"2689\", \"amount_denda\": \"0\", \"amount_pokok\": \"224039\", \"amount_sanksi\": \"0\", \"bulan_pajak\": \"\", \"jns_pajak\": \"Pajak Restoran\", \"kd_rek_bunga\": \"4149705001\", \"kd_rek_denda\": \"4149705002\", \"kd_rek_pokok\": \"4110603\", \"kd_rek_sanksi\": \"4149705003\", \"kode_billing\": \"312402050610360000\", \"nama\": \"THE COFFEE BEAN   TEA LEAF\", \"no_skpd\": \"01.00.05.753.1.12.2009\", \"nop\": \"312402050610360000\", \"tahun_pajak\": \"2009\" \"ntb\": \"123423421232\"}]",
		},
	}

	for noTest, tc := range testCases {
		result, err := assigner.ReadCommand(tc.Input)
		errMsg := ""
		if err != nil {
			errMsg = fmt.Sprintf("No Test.%v: %v", noTest, err.Error())
		}
		require.NoError(t, err, errMsg)
		if result != "invalid parameter" {
			var resArr []any
			e := json.Unmarshal([]byte(fmt.Sprintf("%v", result)), &resArr)
			if e != nil {
				require.NoError(t, e, e.Error())
			} else {
				for _, item := range resArr {

					switch v := item.(type) {
					case map[string]interface{}:
						// require.Equal(t, "20250224", v["ntb"])
						require.NotNil(t, v["ntb"])
						require.EqualValues(t, 12, len(fmt.Sprintf("%v", v["ntb"])))
					default:
						err = errors.New("not object")
					}

				}
			}
		}
	}
}
